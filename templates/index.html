<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üîê Raspberry Pi IDS Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 30px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .anomaly { color: red; font-weight: bold; }
        .normal { color: green; }
    </style>
</head>
<body>
    <h1>üîê Raspberry Pi IDS Dashboard</h1>
    {% if logs %}
        {% for log in logs %}
            <h2>{{ log.filename }} ({{ log.size }} bytes)</h2>
            {% if log.error %}
                <p style="color:red;">Error parsing CSV: {{ log.error }}</p>
            {% else %}
                <table>
                    <tr>
                        {% for col in log.rows[0].keys() %}
                            <th>{{ col }}</th>
                        {% endfor %}
                    </tr>
                    {% for row in log.rows %}
                        <tr>
                            {% for key, value in row.items() %}
                                {% if value|string|lower == "anomaly" %}
                                    <td class="anomaly">{{ value }}</td>
                                {% elif value|string|lower == "normal" %}
                                    <td class="normal">{{ value }}</td>
                                {% else %}
                                    <td>{{ value }}</td>
                                {% endif %}
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>No logs found</p>
    {% endif %}
    <p>Auto-refresh every 30 seconds | Powered by Azure & Flask</p>
    <script>
        setTimeout(() => { location.reload(); }, 30000); // Refresh every 30s
    </script>
</body>
</html>
